<html>
<head>
<title>Javascript remote control</title>
<script>
var progress;
function show_progress(){
	progress.setAttribute("class", "visibleprogress");
}
function hide_progress(){
	progress.setAttribute("class", "hiddenprogress");
}
function send(message){
	var request = new XMLHttpRequest();
	progress = document.getElementById("progress");
	show_progress();
	response.innerHTML = "";
	request.open("POST", "/", false);
	try{
		request.send(message.value);
	} catch(e) {
		hide_progress();
		response.innerHTML = e;
		return;
	}
	hide_progress();
	response.innerHTML = request.responseText;
}
</script>
<style>
#response{
	background-color: #ddd;
	margin: 1em;
	padding: 0.5em;
}
.hiddenprogress{
	display: none;
}
.visibleprogress{
	display: block;
	position: absolute;
	top: 0;
	left: 0;
	z-index: 5;
	background-color: rgba(0, 0, 0, 0.7);
	color: #fff;
	text-align: center;
	width: 100%;
	height: 100%;
}
#progress img{
	display: block;
	margin-top: 20%;
	margin-left: auto;
	margin-right: auto;
}
</style>
</head>
<body>
<div id="progress" class="hiddenprogress"><img src="progress.svg"/>http://www.bogotobogo.com/svg.html</div>
<textarea id="message" rows="20" cols="80"></textarea>
<br />
<input type="button" value="Enviar" onclick="send(message)"/>
<div id="response"></div>
</body>
</html>
